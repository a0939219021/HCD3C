# CNS 3910 饮水机能源效率计算 - 快速参考指南

## 🎯 两种类型对比

| 项目 | 温热型 🔥 | 冰温热型 ❄️🔥 |
|------|----------|--------------|
| **标准依据** | CNS 3910 | 节能标章基准（能技字第10705015570号） |
| **输入参数** | 4个 | 6个 |
| **判定标准** | 1-5级 + MEPS | 合格/不合格 |
| **主要差异** | 只有热水 | 有热水+冰水 |

---

## 📝 输入参数对比

### 温热型（4个参数）
```
✅ E24 (kWh)         - 24小时备用损失
✅ T_hot (°C)        - 热水系统平均水温
✅ T_amb (°C)        - 周围温度
✅ V (L)             - 热贮水桶容量
```

### 冰温热型（6个参数）
```
✅ E24 (kWh)         - 24小时备用损失
✅ T_hot (°C)        - 热水平均温度
✅ T_cold (°C)       - 冰水平均温度  ⭐新增
✅ T_amb (°C)        - 周围温度
✅ V_hot (L)         - 热水桶容量
✅ V_cold (L)        - 冰水桶容量    ⭐新增
```

---

## 🧮 计算公式对比

### 温热型
```python
# 步骤1：温度校正系数
K = (T_hot - T_amb) / (100 - T_amb)

# 步骤2：标准化待机损失
E_st,24 = E24 / K

# 步骤3：判定
MEPS = 0.053 × V + 0.750
等级1 = 0.032 × V + 0.450
等级2 = 0.037 × V + 0.525
等级3 = 0.042 × V + 0.600
等级4 = 0.048 × V + 0.675
等级5 = 0.053 × V + 0.750
```

### 冰温热型
```python
# 步骤1：温度校正系数（两个）
K1 = (T_hot - T_amb) / (100 - T_amb)
K2 = (T_amb - T_cold) / T_amb

# 步骤2：等效内容量
Veq = V_hot × K1 + (V_cold × K2) / 3

# 步骤3：能源耗用基准
如果 Veq ≤ 12L:
    E = 0.059 × Veq + 0.293
否则 (Veq > 12L):
    E = 0.023 × Veq + 0.725

# 步骤4：判定
合格: E24 ≤ E
不合格: E24 > E
```

---

## 📊 输出结果对比

### 温热型输出
```
✓ 温度校正系数 K
✓ 标准化待机损失 E_st,24
✓ MEPS 基准值
✓ 1-5级门槛对比
✓ 最终等级（1/2/3/4/5 或 不合格）
```

### 冰温热型输出
```
✓ 热水校正系数 K1
✓ 冰水校正系数 K2
✓ 等效内容量 Veq
✓ 能源耗用基准 E
✓ 节能标章判定（合格/不合格）
✓ 余裕量（正/负）
```

---

## 🎨 GUI 操作流程

```
1. 启动程序
   python cns3910_gui_v2.py

2. 选择类型
   ○ 温热型  ● 冰温热型
   
3. 界面自动切换
   温热型: 4个输入框
   冰温热型: 6个输入框

4. 输入数据
   填写所有必填字段

5. 点击计算
   [计算能效] 按钮

6. 查看结果
   • 温热型: 显示能效等级 (1-5)
   • 冰温热型: 显示合格/不合格

7. 切换语言（可选）
   中文 / English / 한국어
```

---

## 💡 常见数值参考

### 温度范围
| 参数 | 典型值 | 测试范围 |
|------|--------|----------|
| 热水温度 | 87-90°C | 85-95°C |
| 冰水温度 | 5-8°C | 3-10°C |
| 周围温度 | 25°C | 23-27°C |

### 容量范围
| 类型 | 热水桶 | 冰水桶 | 等效容量 |
|------|--------|--------|----------|
| 小型家用 | 1-3L | 1-4L | 1-5L |
| 中型办公 | 3-6L | 4-8L | 5-12L |
| 大型商用 | 6-12L | 8-15L | 12-20L |

### E24 能耗参考
| 等级/判定 | E24 范围 | 说明 |
|-----------|----------|------|
| 1级（最佳） | < 0.5 kWh | 极高效 |
| 2-3级 | 0.5-0.8 kWh | 良好 |
| 4-5级 | 0.8-1.2 kWh | 达标 |
| 不合格 | > 1.2 kWh | 需改进 |

---

## ⚡ 快速诊断

### 如果显示"不合格"

#### 温热型
```
问题：E_st,24 > MEPS
原因：
  • E24 能耗过高
  • 保温性能差
  • 温控不精确
  
改进方向：
  ✓ 增强保温层
  ✓ 优化温控系统
  ✓ 减少待机损失
```

#### 冰温热型
```
问题：E24 > E基准
原因：
  • 制冷/加热效率低
  • 等效容量偏大
  • 温差控制不佳
  
改进方向：
  ✓ 提升压缩机效率
  ✓ 优化制冷/加热系统
  ✓ 改善保温设计
```

---

## 🔍 关键公式记忆

### 温热型
```
记忆口诀：
"K算温比，E除以K，MEPS五三加七五"

K = (热 - 环) / (100 - 环)
E_st,24 = E24 / K
MEPS = 0.053V + 0.750
```

### 冰温热型
```
记忆口诀：
"K1热比，K2冷比，V等效三分一，小五九大二三"

K1 = (热 - 环) / (100 - 环)
K2 = (环 - 冷) / 环
Veq = V1×K1 + V2×K2/3

Veq≤12:  E = 0.059Veq + 0.293
Veq>12:  E = 0.023Veq + 0.725
```

---

## 📋 检查清单

### 测试前准备
- [ ] 确认饮水机类型（温热/冰温热）
- [ ] 准备功率计测量 E24
- [ ] 准备温度计（热水/冰水/环境）
- [ ] 测量水箱容量
- [ ] 记录标示容量

### 数据录入检查
- [ ] E24 数值合理（0.3-2.0 kWh）
- [ ] 热水温度 > 周围温度
- [ ] 冰水温度 < 周围温度（冰温热型）
- [ ] 容量数值正确
- [ ] 单位正确（kWh, °C, L）

### 结果验证
- [ ] 校正系数在合理范围（0.5-0.9）
- [ ] 等效容量符合预期（冰温热型）
- [ ] 能耗基准值合理
- [ ] 判定结果明确

---

## 🎓 常见错误处理

| 错误提示 | 原因 | 解决方法 |
|----------|------|----------|
| "请输入有效的数字" | 输入格式错误 | 只输入数字，不要单位 |
| "热水温度必须高于周围温度" | 温度逻辑错误 | 检查温度数值 |
| "冰水温度必须低于周围温度" | 温度逻辑错误 | 检查冰水温度 |
| K值异常（>1 或 <0） | 温度输入错误 | 重新测量温度 |
| Veq为负值 | 参数输入错误 | 检查所有输入 |

---

## 📱 界面截图说明

### 温热型界面
```
┌──────────────────────────────┐
│ ● 温热型  ○ 冰温热型         │
├──────────────────────────────┤
│ E24 (kWh):        [1.152]    │
│ 热水温度 (°C):    [87.0]     │
│ 周围温度 (°C):    [25.0]     │
│ 热水桶容量 (L):   [1.4]      │
├──────────────────────────────┤
│ 结果: 不合格（超标69.1%）    │
└──────────────────────────────┘
```

### 冰温热型界面
```
┌──────────────────────────────┐
│ ○ 温热型  ● 冰温热型         │
├──────────────────────────────┤
│ E24 (kWh):        [1.200]    │
│ 热水温度 (°C):    [88.0]     │
│ 冰水温度 (°C):    [8.0]  ⭐  │
│ 周围温度 (°C):    [25.0]     │
│ 热水桶容量 (L):   [2.5]      │
│ 冰水桶容量 (L):   [3.0]  ⭐  │
├──────────────────────────────┤
│ 结果: 不合格（超标162.6%）   │
└──────────────────────────────┘
```

---

## 🌐 语言对照

| 中文 | English | 한국어 |
|------|---------|--------|
| 温热型 | Hot-Warm Type | 온열형 |
| 冰温热型 | Cold-Hot Type | 냉온열형 |
| 合格 | Qualified | 적격 |
| 不合格 | Not Qualified | 부적격 |
| 等级 | Grade | 등급 |
| 计算 | Calculate | 계산 |
| 清除 | Clear | 지우기 |

---

## 💻 命令行快速测试

### 温热型
```python
from cns3910_efficiency_calculator import *

# 创建输入
input = HotWarmDispenserInput(
    E24_kWh=0.5,
    T_hot24_C=85.0,
    T_amb_C=25.0,
    V_marked_L=2.0
)

# 计算
result = evaluate(input)
print(f"等级: {result['grade']}")
```

### 冰温热型
```python
from cns3910_efficiency_calculator import *

# 创建输入
input = ColdHotDispenserInput(
    E24_kWh=1.2,
    T_hot_C=88.0,
    T_cold_C=8.0,
    T_amb_C=25.0,
    V_hot_L=2.5,
    V_cold_L=3.0
)

# 计算
result = evaluate_cold_hot(input)
print(f"判定: {'合格' if result['is_qualified'] else '不合格'}")
```

---

## 📞 需要帮助？

1. 查看完整文档：`README_V2.md`
2. GUI使用说明：`GUI使用说明.md`
3. 运行测试程序：`python cns3910_efficiency_calculator.py`
4. 启动GUI：`python cns3910_gui_v2.py`

---

**版本：V2.0 | 更新日期：2025-10-20**

