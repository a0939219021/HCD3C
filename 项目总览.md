# CNS 3910 饮水机能源效率计算器 - 项目总览

## 📦 项目文件清单

### 🎯 核心程序文件

| 文件名 | 类型 | 功能 | 推荐度 |
|--------|------|------|--------|
| `cns3910_gui_v2.py` | GUI应用 | **新版图形界面**（支持两种类型） | ⭐⭐⭐⭐⭐ |
| `cns3910_efficiency_calculator.py` | 核心库 | 计算引擎（温热型+冰温热型） | ⭐⭐⭐⭐⭐ |
| `cns3910_gui.py` | GUI应用 | 旧版图形界面（仅温热型） | ⭐⭐⭐ |
| `cns3910_interactive.py` | 命令行 | 交互式命令行工具 | ⭐⭐⭐ |
| `cns3910_batch_csv.py` | 批处理 | CSV批量测试工具 | ⭐⭐⭐ |

### 📚 文档文件

| 文件名 | 内容 | 适用对象 |
|--------|------|----------|
| `README_V2.md` | 完整技术文档 | 开发者、技术人员 |
| `快速参考指南.md` | 快速查询手册 | 测试人员、操作员 |
| `GUI使用说明.md` | GUI详细教程 | 新用户 |
| `项目总览.md` | 本文档 | 所有用户 |

---

## 🚀 快速开始指南

### 对于普通用户（测试人员）

**推荐：使用新版GUI**

```bash
# 1. 启动程序
python cns3910_gui_v2.py

# 2. 选择类型
点击：○ 温热型  或  ○ 冰温热型

# 3. 输入数据
填写测试参数

# 4. 计算
点击 [计算能效] 按钮

# 5. 查看结果
滚动查看完整报告
```

### 对于开发者

**使用核心库**

```python
# 导入库
from cns3910_efficiency_calculator import (
    HotWarmDispenserInput,      # 温热型
    ColdHotDispenserInput,      # 冰温热型
    evaluate,                   # 温热型计算
    evaluate_cold_hot          # 冰温热型计算
)

# 温热型示例
input1 = HotWarmDispenserInput(
    E24_kWh=0.5,
    T_hot24_C=85.0,
    T_amb_C=25.0,
    V_marked_L=2.0
)
result1 = evaluate(input1)

# 冰温热型示例
input2 = ColdHotDispenserInput(
    E24_kWh=1.2,
    T_hot_C=88.0,
    T_cold_C=8.0,
    T_amb_C=25.0,
    V_hot_L=2.5,
    V_cold_L=3.0
)
result2 = evaluate_cold_hot(input2)
```

---

## 🎯 功能特性对比

### GUI V2（新版）- 推荐使用 ⭐

✅ **完整功能**
- 支持温热型（CNS 3910 能效等级1-5）
- 支持冰温热型（节能标章合格/不合格）
- 三语界面（中文/English/한국어）
- 类型选择（单选按钮切换）
- 动态输入字段（自动适配类型）
- 大号图标显示结果
- 颜色编码（等级/判定）

✅ **用户体验**
- 界面尺寸：800×850 px
- 响应式布局
- 输入验证（温度逻辑检查）
- 错误提示
- 清除功能

### GUI V1（旧版）

⚠️ **有限功能**
- 仅支持温热型
- 三语界面
- 固定输入字段

**建议：如只需温热型计算可继续使用，否则请使用V2**

---

## 📊 两种类型详细对比

### 🔥 温热型饮水机

**适用标准**
- CNS 3910 储备型电热水器

**测试参数**
```
E24 (kWh)      - 24小时备用损失
T_hot (°C)     - 热水系统平均水温
T_amb (°C)     - 周围温度
V (L)          - 热贮水桶容量
```

**判定标准**
- **1级**：最高效（绿色）
- **2级**：高效（蓝色）
- **3级**：中等（橙色）
- **4级**：一般（深橙）
- **5级**：基准线（红色）
- **不合格**：超过5级（红色）

**计算流程**
```
输入 → K系数 → E_st,24 → 对比门槛 → 判定等级
```

---

### ❄️🔥 冰温热型饮水机

**适用标准**
- 节能标章能源耗用基准（能技字第10705015570号）

**测试参数**
```
E24 (kWh)      - 24小时备用损失
T_hot (°C)     - 热水平均温度
T_cold (°C)    - 冰水平均温度  ⭐
T_amb (°C)     - 周围温度
V_hot (L)      - 热水桶容量
V_cold (L)     - 冰水桶容量     ⭐
```

**判定标准**
- **合格**：E24 ≤ 能源基准 E（绿色✓）
- **不合格**：E24 > 能源基准 E（红色✗）

**计算流程**
```
输入 → K1/K2系数 → Veq等效容量 → E基准 → 判定合格/不合格
```

---

## 🛠️ 使用场景

### 场景1：产品开发阶段
**目标**：验证设计是否符合能效标准

```
使用工具：GUI V2
步骤：
1. 测试原型机能耗
2. 输入实测数据
3. 查看等级/判定
4. 根据结果优化设计
5. 重复测试直到达标
```

### 场景2：生产质检
**目标**：批量测试产品合格率

```
使用工具：cns3910_batch_csv.py
步骤：
1. 准备 input.csv（包含所有测试数据）
2. 运行批量处理
3. 查看 output.csv（包含所有结果）
4. 分析统计报告
```

### 场景3：现场快速测试
**目标**：单台设备快速判定

```
使用工具：GUI V2
步骤：
1. 启动程序
2. 选择类型
3. 输入实测值
4. 立即获得结果
5. 打印/截图保存
```

### 场景4：技术培训
**目标**：教学演示

```
使用工具：GUI V2 + 快速参考指南
步骤：
1. 展示界面操作
2. 演示不同数据的结果
3. 讲解计算原理
4. 对比两种类型差异
```

---

## 📈 典型工作流程

### 完整测试流程

```mermaid
开始
  ↓
确定饮水机类型（温热型/冰温热型）
  ↓
准备测试设备（功率计、温度计）
  ↓
测量24小时能耗 E24
  ↓
测量温度（热水、冰水、环境）
  ↓
测量/查看容量标示
  ↓
启动 cns3910_gui_v2.py
  ↓
选择类型（单选按钮）
  ↓
输入测试数据
  ↓
点击 [计算能效]
  ↓
查看结果
  ├─ 温热型：1-5级或不合格
  └─ 冰温热型：合格/不合格
  ↓
记录/打印/截图
  ↓
完成
```

---

## 💾 数据格式说明

### 输入数据格式

#### 温热型
```json
{
    "E24_kWh": 0.5,
    "T_hot24_C": 85.0,
    "T_amb_C": 25.0,
    "V_marked_L": 2.0
}
```

#### 冰温热型
```json
{
    "E24_kWh": 1.2,
    "T_hot_C": 88.0,
    "T_cold_C": 8.0,
    "T_amb_C": 25.0,
    "V_hot_L": 2.5,
    "V_cold_L": 3.0
}
```

### 输出结果格式

#### 温热型
```json
{
    "K": 0.8,
    "E_st24_kWh": 0.625,
    "MEPS_kWh": 0.856,
    "limits_kWh": {
        "1": 0.514,
        "2": 0.599,
        "3": 0.684,
        "4": 0.771,
        "5": 0.856
    },
    "grade": 3,
    "is_meps_pass": true
}
```

#### 冰温热型
```json
{
    "K1": 0.84,
    "K2": 0.68,
    "Veq_L": 2.78,
    "E_standard_kWh": 0.457,
    "E24_kWh": 1.2,
    "is_qualified": false,
    "margin_kWh": -0.743,
    "margin_percent": -162.6
}
```

---

## 🎓 学习资源

### 初学者
1. 阅读 `快速参考指南.md`
2. 运行 GUI V2 尝试示例数据
3. 查看 `GUI使用说明.md`

### 进阶用户
1. 阅读 `README_V2.md` 了解技术细节
2. 查看 `cns3910_efficiency_calculator.py` 源代码
3. 尝试命令行工具和批量处理

### 开发者
1. 研究核心计算函数
2. 了解数据结构定义
3. 学习GUI框架实现
4. 扩展自定义功能

---

## 🔧 系统要求

### 最低要求
- **操作系统**：Windows 7+ / macOS 10.12+ / Linux
- **Python**：3.6 或更高版本
- **内存**：256 MB
- **硬盘**：10 MB

### 推荐配置
- **操作系统**：Windows 10+ / macOS 11+ / Ubuntu 20.04+
- **Python**：3.8 或更高版本
- **内存**：512 MB
- **显示器**：1280×800 或更高分辨率

### 依赖库
- **tkinter**：GUI界面（Python自带）
- **dataclasses**：数据结构（Python 3.7+自带）
- **typing**：类型提示（Python 3.5+自带）

**无需额外安装任何第三方库！**

---

## 📞 技术支持

### 常见问题

**Q1: 程序无法启动？**
```bash
# 检查Python版本
python --version

# 应该显示 Python 3.6 或更高
```

**Q2: GUI界面显示异常？**
```bash
# 检查tkinter是否可用
python -m tkinter

# 应该弹出一个小窗口
```

**Q3: 计算结果不对？**
- 检查输入数据是否正确
- 确认温度关系（热水>环境>冰水）
- 参考快速参考指南验证公式

**Q4: 如何批量测试？**
```bash
# 1. 创建示例CSV
python cns3910_batch_csv.py --sample

# 2. 编辑 sample_input.csv

# 3. 运行批量处理
python cns3910_batch_csv.py sample_input.csv output.csv
```

---

## 🎯 下一步建议

### 对于新用户
1. ✅ 启动 `cns3910_gui_v2.py`
2. ✅ 尝试预填充的示例数据
3. ✅ 切换温热型/冰温热型
4. ✅ 切换语言体验
5. ✅ 阅读快速参考指南

### 对于测试工程师
1. ✅ 准备测试设备
2. ✅ 熟悉两种类型的区别
3. ✅ 建立测试流程SOP
4. ✅ 使用批量工具处理数据
5. ✅ 建立测试数据库

### 对于开发者
1. ✅ 研究源代码
2. ✅ 了解计算原理
3. ✅ 扩展自定义功能
4. ✅ 集成到现有系统
5. ✅ 贡献改进建议

---

## 📊 项目统计

| 项目 | 数量/规模 |
|------|-----------|
| Python文件 | 5个 |
| 文档文件 | 4个 |
| 总代码行数 | ~1500行 |
| 支持语言 | 3种（中/英/韩） |
| 饮水机类型 | 2种 |
| 能效等级 | 5级（温热型） |
| GUI窗口尺寸 | 800×850 px |
| 测试函数 | 15+ 个 |

---

## 🏆 项目亮点

✨ **完整性**
- 涵盖两种主要类型
- 符合最新国家标准
- 完整的计算公式实现

✨ **易用性**
- 图形化界面，无需编程
- 三语支持，国际化
- 清晰的结果展示

✨ **准确性**
- 严格按照标准实现
- 精确的数值处理
- 完整的输入验证

✨ **扩展性**
- 模块化设计
- 清晰的代码结构
- 易于二次开发

---

## 📅 版本历史

### V2.0 (2025-10-20) - 当前版本
- ✨ 新增冰温热型饮水机计算
- ✨ 支持类型切换（温热/冰温热）
- ✨ 动态输入字段
- ✨ 完整的三语支持
- 🎨 优化界面布局
- 📚 完善文档体系

### V1.0
- ✅ 温热型饮水机能效计算
- ✅ 基础GUI界面
- ✅ 三语界面支持

---

## 📧 联系方式

如需技术支持、功能建议或问题反馈，请参考：
- 技术文档：`README_V2.md`
- 使用指南：`快速参考指南.md`
- GUI教程：`GUI使用说明.md`

---

**项目版本：V2.0**  
**最后更新：2025-10-20**  
**开发语言：Python 3.6+**  
**界面框架：Tkinter**  
**许可证：MIT**

---

Made with ❤️ for Energy Efficiency Testing

