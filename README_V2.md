# CNS 3910 饮水机能源效率计算器 V2.0

## 🆕 最新功能

✅ **支持两种类型的饮水机**
- 🔥 **温热型**：CNS 3910 能源效率等级（1-5级）+ MEPS 基准
- ❄️ **冰温热型**：节能标章能源耗用基准（合格/不合格）

✅ **三语界面**：中文 / English / 한국어

✅ **图形化界面**：美观易用的 GUI 应用程序

---

## 🚀 快速开始

### 启动新版 GUI（推荐）

```bash
python cns3910_gui_v2.py
```

### 命令行测试

```bash
python cns3910_efficiency_calculator.py
```

---

## 📋 功能说明

### 1️⃣ 温热型饮水机（Hot-Warm Type）

**依据标准**：CNS 3910 储备型电热水器标准

**输入参数**：
- E24 (kWh)：24小时备用损失
- T_hot (°C)：热水系统平均水温
- T_amb (°C)：周围温度
- V (L)：热贮水桶标示容量

**计算公式**：
```
K = (T_hot - T_amb) / (100 - T_amb)
E_st,24 = E24 / K

MEPS = 0.053 × V + 0.750
```

**能效分级**：
| 等级 | 计算公式 (kWh) |
|------|----------------|
| 1级 | E_st,24 ≤ 0.032 × V + 0.450 |
| 2级 | E_st,24 ≤ 0.037 × V + 0.525 |
| 3级 | E_st,24 ≤ 0.042 × V + 0.600 |
| 4级 | E_st,24 ≤ 0.048 × V + 0.675 |
| 5级 | E_st,24 ≤ 0.053 × V + 0.750 |

**输出结果**：
- 温度校正系数 K
- 标准化待机损失 E_st,24
- 能源效率等级（1-5级 或 不合格）
- 各级门槛对比

---

### 2️⃣ 冰温热型饮水机（Cold-Hot Type）

**依据标准**：冰温热型饮水机节能标章能源耗用基准与标示方法（能技字第 10705015570号）

**输入参数**：
- E24 (kWh)：24小时备用损失
- T_hot (°C)：热水平均温度 Th
- T_cold (°C)：冰水平均温度 Tc
- T_amb (°C)：周围温度
- V_hot (L)：热水贮水桶容量 V1
- V_cold (L)：冰水贮水桶容量 V2

**计算公式**：
```
K1 = (Th - T_amb) / (100 - T_amb)
K2 = (T_amb - Tc) / T_amb
Veq = V1 × K1 + (V2 × K2) / 3

能源耗用基准 E：
- 若 Veq ≤ 12L：E = 0.059 × Veq + 0.293
- 若 Veq > 12L：E = 0.023 × Veq + 0.725
```

**判定标准**：
- ✅ **合格**：E24 实测值 ≤ 能源耗用基准 E
- ❌ **不合格**：E24 实测值 > 能源耗用基准 E

**输出结果**：
- 热水温度校正系数 K1
- 冰水温度校正系数 K2
- 等效内容量 Veq
- 能源耗用基准 E
- 节能标章判定（合格/不合格）
- 余裕量（正数表示通过，负数表示超标）

---

## 🎨 GUI 使用指南

### 界面布局

```
┌────────────────────────────────────────────────┐
│ 标题                      [语言选择 ▼]         │
├────────────────────────────────────────────────┤
│ 饮水机类型： ○ 温热型  ○ 冰温热型             │
├────────────────────────────────────────────────┤
│ 测试数据输入                                    │
│  根据选择的类型自动切换输入字段                 │
├────────────────────────────────────────────────┤
│ [计算能效]  [清除]                             │
├────────────────────────────────────────────────┤
│ 计算结果                                        │
│  • 校正系数                                     │
│  • 标准化/等效值                                │
│  • 分级门槛（温热型）/ 能源基准（冰温热型）     │
│  • 最终等级显示（大图标）                       │
└────────────────────────────────────────────────┘
```

### 操作步骤

1. **选择类型**：点击单选按钮选择「温热型」或「冰温热型」
2. **输入数据**：根据显示的字段填写测试数据
3. **选择语言**：右上角下拉菜单切换语言（可选）
4. **计算**：点击「计算能效」按钮
5. **查看结果**：滚动查看完整结果
6. **清除**：点击「清除」按钮进行下一次测试

---

## 📊 测试案例

### 温热型测试案例

#### 案例1：不合格产品
```python
E24 = 1.152 kWh
T_hot = 87.0 °C
T_amb = 25.0 °C
V = 1.4 L

结果：
- E_st,24 = 1.394 kWh
- MEPS = 0.824 kWh
- 判定：不合格（超出 69.1%）
```

#### 案例2：3级合格产品
```python
E24 = 0.500 kWh
T_hot = 85.0 °C
T_amb = 25.0 °C
V = 2.0 L

结果：
- E_st,24 = 0.625 kWh
- MEPS = 0.856 kWh
- 判定：3级
```

### 冰温热型测试案例

#### 案例1：小容量（Veq ≤ 12L）
```python
E24 = 1.200 kWh
T_hot = 88.0 °C
T_cold = 8.0 °C
T_amb = 25.0 °C
V_hot = 2.5 L
V_cold = 3.0 L

结果：
- K1 = 0.840
- K2 = 0.680
- Veq = 2.780 L
- E基准 = 0.457 kWh
- 判定：不合格（超出 162.6%）
```

#### 案例2：大容量（Veq > 12L）
```python
E24 = 1.500 kWh
T_hot = 90.0 °C
T_cold = 5.0 °C
T_amb = 25.0 °C
V_hot = 8.0 L
V_cold = 10.0 L

结果：
- Veq = 9.603 L
- E基准 = 0.860 kWh
- 判定：不合格（超出 74.4%）
```

#### 案例3：合格产品
```python
E24 = 0.400 kWh
T_hot = 85.0 °C
T_cold = 10.0 °C
T_amb = 25.0 °C
V_hot = 2.0 L
V_cold = 2.5 L

结果：
- Veq = 1.800 L
- E基准 = 0.399 kWh
- 判定：合格（余裕量 -0.001 kWh）
```

---

## 📁 文件说明

| 文件 | 说明 |
|------|------|
| `cns3910_efficiency_calculator.py` | ⭐ 核心计算引擎（温热型 + 冰温热型） |
| `cns3910_gui_v2.py` | 🖥️ **新版GUI**（推荐使用） |
| `cns3910_gui.py` | 🖥️ 旧版GUI（仅温热型） |
| `cns3910_interactive.py` | 💻 命令行交互式版本 |
| `cns3910_batch_csv.py` | 📊 CSV批量处理工具 |
| `README_V2.md` | 📖 本文档 |
| `GUI使用说明.md` | 📱 GUI详细说明 |

---

## 🔧 技术要求

### 依赖项
- **Python 3.6+**
- **tkinter**（通常随 Python 自带）

### 安装
```bash
# 无需额外安装，直接运行即可
python cns3910_gui_v2.py
```

---

## 🎯 配色说明

### 温热型能效等级颜色
- 🟢 **1级**（绿色）：最高效
- 🔵 **2级**（蓝色）：高效
- 🟠 **3级**（橙色）：中等
- 🟠 **4级**（深橙）：一般
- 🔴 **5级**（红色）：基准线

### 冰温热型判定颜色
- 🟢 **合格**（绿色）：通过节能标章基准
- 🔴 **不合格**（红色）：未达标

---

## 📖 参考标准

1. **CNS 3910** - 储备型电热水器
   - 附表一：容许耗用能源基准
   - 附表五：能源效率分级标准

2. **冰温热型饮水机节能标章能源耗用基准与标示方法**
   - 能技字第 10705015570号
   - 107年9月26日公告，108年9月1日生效

---

## ⚠️ 注意事项

1. **温度验证**：
   - 热水温度必须高于周围温度
   - 冰水温度必须低于周围温度

2. **精度要求**：
   - E24 计算至小数第3位
   - 温度校正系数计算至小数第3位
   - 容量计算至小数第1位

3. **测试条件**：
   - 周围温度：通常为 25°C ± 2°C
   - 热水温度：通常为 85-90°C
   - 冰水温度：通常为 5-10°C

---

## 🆚 版本比较

| 功能 | GUI V1 | GUI V2 (新) |
|------|--------|-------------|
| 温热型计算 | ✅ | ✅ |
| 冰温热型计算 | ❌ | ✅ |
| 三语界面 | ✅ | ✅ |
| 类型切换 | ❌ | ✅ |
| 动态输入字段 | ❌ | ✅ |

---

## 📞 支持

如有任何问题或建议，请参考：
- 技术文档：`README_V2.md`（本文档）
- GUI说明：`GUI使用说明.md`
- 测试程序：`cns3910_efficiency_calculator.py`

---

## 🎉 更新历史

### V2.0 (2025-10-20)
- ✨ 新增冰温热型饮水机计算功能
- ✨ 支持温热型/冰温热型类型切换
- ✨ 动态输入字段（根据类型自动调整）
- ✨ 完整的三语支持
- 🎨 优化界面布局和颜色方案

### V1.0
- ✅ 温热型饮水机能效等级计算
- ✅ 三语界面（中/英/韩）
- ✅ 图形化操作界面

---

**Made with ❤️ for Energy Efficiency Testing**

